"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[850],{5850:function(n,e,t){t.r(e),t.d(e,{default:function(){return I}});var i=t(9439),o=t(2791),a=t(9434),s=t(2175),r=t(9085),c="styles_container__HW8Lb",l="styles_container_miningInfo__ISrps",u="styles_container_miningInfo_aurumBoosters__EY-dL",d="styles_container_miningInfo_timeInfo__51cuT",h="styles_container_miningInfo_mainInfo__hf1vM",v="styles_container_buttonWrapper__ooiE-",m=t(7912),f=t(2181),p=t(9677),g=t(939),_=t(7086),x=t(175),w=t(3267),b=t(3102),S=t(1837),y=t(3329),j=o.lazy((function(){return t.e(356).then(t.bind(t,6356))})),k={"Chaos X-18 Mine Aurum":_,"ChaosX-18 Mine Celium":x,"ChaosX-18 Building Slot":w,"ChaosX-18 Level Up token":b,"Teleport to ChaosX-18":S};function L(n){var e=Math.floor(n/864e5),t=Math.floor(n%864e5/36e5),i=Math.floor(n%36e5/6e4),o=Math.floor(n%6e4/1e3),a="";return e>0&&(a+="".concat(e,"d ")),t>0&&(a+="".concat(t,"h ")),i>0&&(a+="".concat(i,"m ")),a+="".concat(o,"s")}var I=function(n){var e,t=n.mine,_=(0,o.useRef)(null),x=(0,a.I0)(),w=(0,o.useState)(null),b=(0,i.Z)(w,2),S=b[0],I=b[1],M=(0,a.v9)((function(n){return n.user})),C=M.waxConnected,A=M.anchorConnected,D=(0,a.v9)((function(n){return n.nfts})),N=D.myWorkingNfts,T=D.myNfts,U=function(n){var e=T.filter((function(n){return"ChaosX-18 Level Up token"===n.name}));e[0]?A?function(n,e){var t,i,o,a,s;S||(I(n.asset_id),null===(t=m.n.anchorSession)||void 0===t||t.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(i=m.n.anchorSession)||void 0===i||null===(o=i.auth)||void 0===o?void 0:o.actor.toString(),permission:"active"}],data:{from:null===(a=m.n.anchorSession)||void 0===a||null===(s=a.auth)||void 0===s?void 0:s.actor.toString(),to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){r.Am.success("Mine upgrading started, you can mine it when it will be finished"),I(null)})).catch((function(n){r.Am.error("Mine doesn't upgraded, try again after one minute"),I(null)})))}(n,e[0]):C&&function(n,e){var t,i;S||(I(n.asset_id),m.n.wax.api.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(t=m.n.wax)||void 0===t?void 0:t.userAccount,permission:"active"}],data:{from:null===(i=m.n.wax)||void 0===i?void 0:i.userAccount,to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){r.Am.success("Mine upgrading started, you can mine it when it will be finished"),I(null)})).catch((function(n){r.Am.error("Mine doesn't upgraded, try again after one minute"),I(null)})))}(n,e[0]):r.Am.error("To upgrade your mine purchase ChaosX-18 Level Up token")},z=(0,o.useState)(0),X=(0,i.Z)(z,2),B=X[0],E=X[1];return(0,o.useEffect)((function(){t&&setTimeout((function(){x((0,f.gr)(t.asset_id))}),1e3),x((0,f.tV)())}),[x,t]),(0,o.useEffect)((function(){!function(){var n=new Date(t.lastUpgrade).getTime();if(0!==n){var e=(new Date).getTime(),i=n-e;if(i>0){E(i);var o=setInterval((function(){var e=n-(new Date).getTime();e<=0?(clearInterval(o),setTimeout((function(){window.location.reload()}),1e3)):E(e)}),1e3)}}}()}),[]),(0,y.jsxs)(s.E.div,{viewport:{root:_,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:c,children:[N&&(0,y.jsx)(o.Suspense,{fallback:(0,y.jsx)(g.Z,{size:250}),children:(0,y.jsx)(j,{nft:N[null===t||void 0===t?void 0:t.asset_id],image:k[null===(e=N[null===t||void 0===t?void 0:t.asset_id])||void 0===e?void 0:e.name],functional:!1,mineLevel:t.level},null===t||void 0===t?void 0:t.asset_id)},t.asset_id),t&&(0,y.jsxs)("div",{className:l,children:[(0,y.jsxs)("div",{className:u,children:[(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"First booster: "}),"1/1/1970, 00:00:00"===new Date(t.bstrOne).toLocaleString()?"Not yet available":new Date(t.bstrOne).toLocaleString()]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Second booster: "}),"1/1/1970, 00:00:00"===new Date(t.bstrTwo).toLocaleString()?"Not yet available":new Date(t.bstrTwo).toLocaleString()]})]}),(0,y.jsxs)("div",{className:d,children:[(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Last time claimed: "}),"1/1/1970, 00:00:00"===new Date(t.lastMined).toLocaleString()?"None":new Date(t.lastMined).toLocaleString()]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Last time upgrade: "}),"1/1/1970, 00:00:00"===new Date(t.lastUpgrade).toLocaleString()?"Upgrade not in progress":new Date(t.lastUpgrade).toLocaleString()]}),B>0&&(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Time remaining for upgrade: "}),L(B)]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Unstake time: "}),"1/1/1970, 00:00:00"===new Date(t.unstake_time).toLocaleString()?"Unstake not in progress":new Date(t.unstake_time).toLocaleString()]})]}),(0,y.jsx)("div",{className:h,children:(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Miner level: "}),t.level]})})]}),(0,y.jsxs)("div",{className:v,children:[(0,y.jsx)(p.Z,{onClick:function(){A?function(){var n,e,i,o,a;S||(I("Mine"),null===(n=m.n.anchorSession)||void 0===n||n.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=m.n.anchorSession)||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.actor.toString(),permission:"active"}],data:{player:null===(o=m.n.anchorSession)||void 0===o||null===(a=o.auth)||void 0===a?void 0:a.actor.toString(),mineId:null===t||void 0===t?void 0:t.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){r.Am.success("Resources collecting has successfully started"),I(null)})).catch((function(n){r.Am.error("You can't claim now, upgrade in progress"),I(null)})))}():C&&function(){var n,e;S||(I("Mine"),m.n.wax.api.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(n=m.n.wax)||void 0===n?void 0:n.userAccount,permission:"active"}],data:{player:null===(e=m.n.wax)||void 0===e?void 0:e.userAccount,mineId:null===t||void 0===t?void 0:t.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){r.Am.success("Resources collecting has successfully started"),I(null)})).catch((function(n){r.Am.error("You can't claim now, upgrade in progress"),I(null)})))}()},loader:S,size:"fit",color:"blue",children:"Claim now"}),(0,y.jsx)(p.Z,{onClick:function(){return U(N[null===t||void 0===t?void 0:t.asset_id])},loader:S,size:"fit",color:"blue",children:"Upgrade now"})]})]})}}}]);
//# sourceMappingURL=850.e4552097.chunk.js.map