"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[850],{5850:function(n,e,i){i.r(e),i.d(e,{default:function(){return A}});var o=i(7762),t=i(9439),a=i(2791),s=i(9434),r=i(2175),l=i(9085),c="styles_container__HW8Lb",u="styles_container_miningInfo__ISrps",d="styles_container_miningInfo_aurumBoosters__EY-dL",h="styles_container_miningInfo_timeInfo__51cuT",v="styles_container_miningInfo_mainInfo__hf1vM",m="styles_container_buttonWrapper__ooiE-",f=i(7912),p=i(2181),g=i(9677),_=i(939),x=i(7086),w=i(175),y=i(3267),b=i(3102),S=i(1837),j=i(3329),M=a.lazy((function(){return i.e(356).then(i.bind(i,6356))})),k={"Chaos X-18 Mine Aurum":x,"ChaosX-18 Mine Celium":w,"ChaosX-18 Building Slot":y,"ChaosX-18 Level Up token":b,"Teleport to ChaosX-18":S};console.log("AllMines importato da profile",allMines);var A=function(n){var e,i=n.mine,x=n.allMines,w=(0,a.useRef)(null),y=(0,s.I0)(),b=(0,a.useState)(null),S=(0,t.Z)(b,2),A=S[0],C=S[1],L=(0,s.v9)((function(n){return n.user})),I=L.waxConnected,N=L.anchorConnected,T=(0,s.v9)((function(n){return n.nfts})),D=T.myWorkingNfts,z=T.myNfts,U=function(){var n,e,o,t,a;A||(C("Mine"),null===(n=f.n.anchorSession)||void 0===n||n.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=f.n.anchorSession)||void 0===e||null===(o=e.auth)||void 0===o?void 0:o.actor.toString(),permission:"active"}],data:{player:null===(t=f.n.anchorSession)||void 0===t||null===(a=t.auth)||void 0===a?void 0:a.actor.toString(),mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){l.Am.success("Resources collecting has successfully started"),C(null)})).catch((function(n){l.Am.error("You can't claim now, upgrade in progress"),C(null)})))},X=function(){var n,e;A||(C("Mine"),f.n.wax.api.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(n=f.n.wax)||void 0===n?void 0:n.userAccount,permission:"active"}],data:{player:null===(e=f.n.wax)||void 0===e?void 0:e.userAccount,mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){l.Am.success("Resources collecting has successfully started"),C(null)})).catch((function(n){l.Am.error("You can't claim now, upgrade in progress"),C(null)})))},B=function(){N?U():I&&X()}.mineNft,Z=function(n){var e=z.filter((function(n){return"ChaosX-18 Level Up token"===n.name}));e[0]?N?function(n,e){var i,o,t,a,s;A||(C(n.asset_id),null===(i=f.n.anchorSession)||void 0===i||i.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(o=f.n.anchorSession)||void 0===o||null===(t=o.auth)||void 0===t?void 0:t.actor.toString(),permission:"active"}],data:{from:null===(a=f.n.anchorSession)||void 0===a||null===(s=a.auth)||void 0===s?void 0:s.actor.toString(),to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){l.Am.success("Mine upgrading started, you can mine it when it will be finished"),C(null)})).catch((function(n){l.Am.error("Mine doesn't upgraded, try again after one minute"),C(null)})))}(n,e[0]):I&&function(n,e){var i,o;A||(C(n.asset_id),f.n.wax.api.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(i=f.n.wax)||void 0===i?void 0:i.userAccount,permission:"active"}],data:{from:null===(o=f.n.wax)||void 0===o?void 0:o.userAccount,to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){l.Am.success("Mine upgrading started, you can mine it when it will be finished"),C(null)})).catch((function(n){l.Am.error("Mine doesn't upgraded, try again after one minute"),C(null)})))}(n,e[0]):l.Am.error("To upgrade your mine purchase ChaosX-18 Level Up token")};return(0,a.useEffect)((function(){i&&setTimeout((function(){y((0,p.gr)(i.asset_id))}),1e3),y((0,p.tV)())}),[y,i]),(0,j.jsxs)(r.E.div,{viewport:{root:w,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:c,children:[D&&(0,j.jsx)(a.Suspense,{fallback:(0,j.jsx)(_.Z,{size:250}),children:(0,j.jsx)(M,{nft:D[null===i||void 0===i?void 0:i.asset_id],image:k[null===(e=D[null===i||void 0===i?void 0:i.asset_id])||void 0===e?void 0:e.name],functional:!1,mineLevel:i.level,mineLastUpgrade:i.lastUpgrade},null===i||void 0===i?void 0:i.asset_id)},i.asset_id),i&&(0,j.jsxs)("div",{className:u,children:[(0,j.jsxs)("div",{className:d,children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("b",{children:"First booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrOne).toLocaleString()?"Not yet available":new Date(i.bstrOne).toLocaleString()]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("b",{children:"Second booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrTwo).toLocaleString()?"Not yet available":new Date(i.bstrTwo).toLocaleString()]})]}),(0,j.jsxs)("div",{className:h,children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("b",{children:"Last time claimed: "}),"1.1.1970, 00:00:00"===new Date(i.lastMined).toLocaleString()?"None":new Date(i.lastMined).toLocaleString()]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("b",{children:"Upgrade in progress: "}),"1.1.1970, 00:00:00"===new Date(i.lastUpgrade).toLocaleString()?"No":function(){var n=i.level-1,e=Math.floor(11*Math.pow(1.55,n)*1e3+72e5),o=new Date(i.lastUpgrade);o.setTime(o.getTime()+e);var t=new Date;return o.getTime()<=t.getTime()?"No":new Date(o.getTime()-72e5).toLocaleString()}()]})]}),(0,j.jsx)("div",{className:v,children:(0,j.jsxs)("p",{children:[(0,j.jsx)("b",{children:"Miner level: "}),i.level]})})]}),(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)(g.Z,{onClick:function(){if(!A&&Array.isArray(x)){var n,e=(0,o.Z)(x);try{for(e.s();!(n=e.n()).done;){var i=n.value;console.log("Mine corrente:",i),N?U(i):I&&X(i)}}catch(t){e.e(t)}finally{e.f()}}else console.log("Errore: allMines non \xe8 un array o \xe8 indefinito.",x)},loader:A,size:"fit",color:"blue",children:"Claim from All Miners"}),(0,j.jsx)(g.Z,{onClick:B,loader:A,size:"fit",color:"blue",children:"Claim now"}),(0,j.jsx)(g.Z,{onClick:function(){return Z(D[null===i||void 0===i?void 0:i.asset_id])},loader:A,size:"fit",color:"blue",children:"Upgrade now"})]})]})}}}]);
//# sourceMappingURL=850.77174419.chunk.js.map