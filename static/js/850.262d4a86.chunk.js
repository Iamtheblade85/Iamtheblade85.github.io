"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[850],{5850:function(e,n,i){i.r(n),i.d(n,{default:function(){return M}});var o=i(9439),t=i(2791),a=i(9434),s=i(2175),r=i(9085),c="styles_container__HW8Lb",l="styles_container_miningInfo__ISrps",u="styles_container_miningInfo_aurumBoosters__EY-dL",d="styles_container_miningInfo_timeInfo__51cuT",h="styles_container_miningInfo_mainInfo__hf1vM",m="styles_container_buttonWrapper__ooiE-",v=i(7912),f=i(2181),p=i(9677),g=i(939),_=i(7086),x=i(175),w=i(3267),b=i(3102),S=i(1837),y=i(3329),j=t.lazy((function(){return i.e(356).then(i.bind(i,6356))})),k={"Chaos X-18 Mine Aurum":_,"ChaosX-18 Mine Celium":x,"ChaosX-18 Building Slot":w,"ChaosX-18 Level Up token":b,"Teleport to ChaosX-18":S};function L(e){var n=Math.floor(e/864e5),i=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),t=Math.floor(e%6e4/1e3),a="";return n>0&&(a+="".concat(n,"d ")),i>0&&(a+="".concat(i,"h ")),o>0&&(a+="".concat(o,"m ")),a+="".concat(t,"s")}var M=function(e){var n,i=e.mine,_=(0,t.useRef)(null),x=(0,a.I0)(),w=(0,t.useState)(null),b=(0,o.Z)(w,2),S=b[0],M=b[1],I=(0,a.v9)((function(e){return e.user})),C=I.waxConnected,A=I.anchorConnected,N=(0,a.v9)((function(e){return e.nfts})),T=N.myWorkingNfts,D=N.myNfts,U=function(e){var n=D.filter((function(e){return"ChaosX-18 Level Up token"===e.name}));n[0]?A?function(e,n){var i,o,t,a,s;S||(M(e.asset_id),null===(i=v.n.anchorSession)||void 0===i||i.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(o=v.n.anchorSession)||void 0===o||null===(t=o.auth)||void 0===t?void 0:t.actor.toString(),permission:"active"}],data:{from:null===(a=v.n.anchorSession)||void 0===a||null===(s=a.auth)||void 0===s?void 0:s.actor.toString(),to:"xcryptochaos",asset_ids:[n.asset_id],memo:"burn@level@"+e.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Mine upgrading started, you can mine it when it will be finished"),M(null)})).catch((function(e){r.Am.error("Mine doesn't upgraded, try again after one minute"),M(null)})))}(e,n[0]):C&&function(e,n){var i,o;S||(M(e.asset_id),v.n.wax.api.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(i=v.n.wax)||void 0===i?void 0:i.userAccount,permission:"active"}],data:{from:null===(o=v.n.wax)||void 0===o?void 0:o.userAccount,to:"xcryptochaos",asset_ids:[n.asset_id],memo:"burn@level@"+e.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Mine upgrading started, you can mine it when it will be finished"),M(null)})).catch((function(e){r.Am.error("Mine doesn't upgraded, try again after one minute"),M(null)})))}(e,n[0]):r.Am.error("To upgrade your mine purchase ChaosX-18 Level Up token")},z=(0,t.useState)(0),V=(0,o.Z)(z,2),X=V[0],B=V[1],E=function(){var e=new Date(i.lastUpgrade).toLocaleString();if(console.log("Valore di upgradeTime:",e),"1.1.1970, 00:00:00"!==e){var n=1e3*Math.floor(11*Math.pow(1.55,i.level));if(console.log("Valore di neededTime:",n),n>0){B(n),console.log("Valore di timeRemaining:",X);var o=setInterval((function(){B((function(e){var n=e-1e3;return console.log("Valore di updatedTimeRemaining:",n),n<=0?(console.log("Timer scaduto, ricarica la pagina"),clearInterval(o),setTimeout((function(){window.location.reload()}),1e3),0):n}))}),1e3)}}else console.log("Upgrade non in corso")};return E(),(0,t.useEffect)((function(){i&&setTimeout((function(){x((0,f.gr)(i.asset_id))}),1e3),x((0,f.tV)())}),[x,i]),(0,t.useEffect)((function(){E()}),[]),(0,y.jsxs)(s.E.div,{viewport:{root:_,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:c,children:[T&&(0,y.jsx)(t.Suspense,{fallback:(0,y.jsx)(g.Z,{size:250}),children:(0,y.jsx)(j,{nft:T[null===i||void 0===i?void 0:i.asset_id],image:k[null===(n=T[null===i||void 0===i?void 0:i.asset_id])||void 0===n?void 0:n.name],functional:!1,mineLevel:i.level},null===i||void 0===i?void 0:i.asset_id)},i.asset_id),i&&(0,y.jsxs)("div",{className:l,children:[(0,y.jsxs)("div",{className:u,children:[(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"First booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrOne).toLocaleString()?"Not yet available":new Date(i.bstrOne).toLocaleString()]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Second booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrTwo).toLocaleString()?"Not yet available":new Date(i.bstrTwo).toLocaleString()]})]}),(0,y.jsxs)("div",{className:d,children:[(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Last time claimed: "}),"1.1.1970, 00:00:00"===new Date(i.lastMined).toLocaleString()?"None":new Date(i.lastMined).toLocaleString()]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Last time upgrade: "}),"1.1.1970, 00:00:00"===new Date(i.lastUpgrade).toLocaleString()?"Upgrade not in progress":new Date(i.lastUpgrade).toLocaleString()]}),(0,y.jsx)("p",{children:(0,y.jsxs)("b",{children:["Time remaining for upgrade: ",X>0?L(X):"None"]})}),(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Unstake time: "}),"1.1.1970, 00:00:00"===new Date(i.unstake_time).toLocaleString()?"Unstake not in progress":new Date(i.unstake_time).toLocaleString()]})]}),(0,y.jsx)("div",{className:h,children:(0,y.jsxs)("p",{children:[(0,y.jsx)("b",{children:"Miner level: "}),i.level]})})]}),(0,y.jsxs)("div",{className:m,children:[(0,y.jsx)(p.Z,{onClick:function(){A?function(){var e,n,o,t,a;S||(M("Mine"),null===(e=v.n.anchorSession)||void 0===e||e.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(n=v.n.anchorSession)||void 0===n||null===(o=n.auth)||void 0===o?void 0:o.actor.toString(),permission:"active"}],data:{player:null===(t=v.n.anchorSession)||void 0===t||null===(a=t.auth)||void 0===a?void 0:a.actor.toString(),mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Resources collecting has successfully started"),M(null)})).catch((function(e){r.Am.error("You can't claim now, upgrade in progress"),M(null)})))}():C&&function(){var e,n;S||(M("Mine"),v.n.wax.api.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=v.n.wax)||void 0===e?void 0:e.userAccount,permission:"active"}],data:{player:null===(n=v.n.wax)||void 0===n?void 0:n.userAccount,mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Resources collecting has successfully started"),M(null)})).catch((function(e){r.Am.error("You can't claim now, upgrade in progress"),M(null)})))}()},loader:S,size:"fit",color:"blue",children:"Claim now"}),(0,y.jsx)(p.Z,{onClick:function(){return U(T[null===i||void 0===i?void 0:i.asset_id])},loader:S,size:"fit",color:"blue",children:"Upgrade now"})]})]})}}}]);
//# sourceMappingURL=850.262d4a86.chunk.js.map