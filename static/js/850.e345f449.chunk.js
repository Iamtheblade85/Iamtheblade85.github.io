"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[850],{5850:function(n,e,t){t.r(e),t.d(e,{default:function(){return A}});var i=t(7762),o=t(9439),a=t(2791),s=t(9434),r=t(2175),l=t(9085),c="styles_container__HW8Lb",u="styles_container_miningInfo__ISrps",d="styles_container_miningInfo_aurumBoosters__EY-dL",h="styles_container_miningInfo_timeInfo__51cuT",f="styles_container_miningInfo_mainInfo__hf1vM",m="styles_container_buttonWrapper__ooiE-",v=t(7912),p=t(2181),g=t(9677),y=t(939),_=t(7086),w=t(175),x=t(3267),b=t(3102),j=t(1837),S=t(3329),C=a.lazy((function(){return t.e(356).then(t.bind(t,6356))})),M={"Chaos X-18 Mine Aurum":_,"ChaosX-18 Mine Celium":w,"ChaosX-18 Building Slot":x,"ChaosX-18 Level Up token":b,"Teleport to ChaosX-18":j},T="https://cors-anywhere.herokuapp.com/https://wax.pink.gg/v1/chain/get_block_header_state",A=function(n){var e,t=n.mine,_=n.allMines;console.log("AllMines importato da profile",_);var w=(0,a.useRef)(null),x=(0,s.I0)(),b=(0,a.useState)(null),j=(0,o.Z)(b,2),A=j[0],k=j[1],N=(0,s.v9)((function(n){return n.user})),L=N.waxConnected,I=N.anchorConnected,O=(0,s.v9)((function(n){return n.nfts})),D=O.myWorkingNfts,z=O.myNfts,U=function(n){var e,t,i,o;A||(k("Mine"),fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=v.n.anchorSession)||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.actor.toString(),permission:"active"}],data:{player:null===(i=v.n.anchorSession)||void 0===i||null===(o=i.auth)||void 0===o?void 0:o.actor.toString(),mineId:null===n||void 0===n?void 0:n.id}}]})}).then((function(n){return n.json()})).then((function(n){l.Am.success("Resources collecting has successfully started"),k(null)})).catch((function(n){l.Am.error("You can't claim now, upgrade in progress"),k(null)})))},X=function(n){var e,t;A||(k("Mine"),fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=v.n.wax)||void 0===e?void 0:e.userAccount,permission:"active"}],data:{player:null===(t=v.n.wax)||void 0===t?void 0:t.userAccount,mineId:null===n||void 0===n?void 0:n.id}}]})}).then((function(n){return n.json()})).then((function(n){l.Am.success("Resources collecting has successfully started"),k(null)})).catch((function(n){l.Am.error("You can't claim now, upgrade in progress"),k(null)})))},Z=function(n){var e=z.filter((function(n){return"ChaosX-18 Level Up token"===n.name}));e[0]?I?function(n,e){var t,i,o,a;A||(k(n.asset_id),fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(t=v.n.anchorSession)||void 0===t||null===(i=t.auth)||void 0===i?void 0:i.actor.toString(),permission:"active"}],data:{from:null===(o=v.n.anchorSession)||void 0===o||null===(a=o.auth)||void 0===a?void 0:a.actor.toString(),to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]})}).then((function(n){return n.json()})).then((function(n){l.Am.success("Mine upgrading started, you can mine it when it will be finished"),k(null)})).catch((function(n){l.Am.error("Mine doesn't upgraded, try again after one minute"),k(null)})))}(n,e[0]):L&&function(n,e){var t,i;A||(k(n.asset_id),fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(t=v.n.wax)||void 0===t?void 0:t.userAccount,permission:"active"}],data:{from:null===(i=v.n.wax)||void 0===i?void 0:i.userAccount,to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]})}).then((function(n){return n.json()})).then((function(n){l.Am.success("Mine upgrading started, you can mine it when it will be finished"),k(null)})).catch((function(n){l.Am.error("Mine doesn't upgraded, try again after one minute"),k(null)})))}(n,e[0]):l.Am.error("To upgrade your mine purchase ChaosX-18 Level Up token")};return(0,a.useEffect)((function(){t&&setTimeout((function(){x((0,p.gr)(t.asset_id))}),1e3),x((0,p.tV)())}),[x,t]),(0,S.jsxs)(r.E.div,{viewport:{root:w,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:c,children:[D&&(0,S.jsx)(a.Suspense,{fallback:(0,S.jsx)(y.Z,{size:250}),children:(0,S.jsx)(C,{nft:D[null===t||void 0===t?void 0:t.asset_id],image:M[null===(e=D[null===t||void 0===t?void 0:t.asset_id])||void 0===e?void 0:e.name],functional:!1,mineLevel:t.level,mineLastUpgrade:t.lastUpgrade},null===t||void 0===t?void 0:t.asset_id)},t.asset_id),t&&(0,S.jsxs)("div",{className:u,children:[(0,S.jsxs)("div",{className:d,children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"First booster: "}),"1.1.1970, 00:00:00"===new Date(t.bstrOne).toLocaleString()?"Not yet available":new Date(t.bstrOne).toLocaleString()]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Second booster: "}),"1.1.1970, 00:00:00"===new Date(t.bstrTwo).toLocaleString()?"Not yet available":new Date(t.bstrTwo).toLocaleString()]})]}),(0,S.jsxs)("div",{className:h,children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Last time claimed: "}),"1.1.1970, 00:00:00"===new Date(t.lastMined).toLocaleString()?"None":new Date(t.lastMined).toLocaleString()]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Upgrade in progress: "}),"1.1.1970, 00:00:00"===new Date(t.lastUpgrade).toLocaleString()?"No":function(){var n=t.level-1,e=Math.floor(11*Math.pow(1.55,n)*1e3+72e5),i=new Date(t.lastUpgrade);i.setTime(i.getTime()+e);var o=new Date;return i.getTime()<=o.getTime()?"No":new Date(i.getTime()-72e5).toLocaleString()}()]})]}),(0,S.jsx)("div",{className:f,children:(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Miner level: "}),t.level]})})]}),(0,S.jsxs)("div",{className:m,children:[(0,S.jsx)(g.Z,{onClick:function(){if(!A&&Array.isArray(_)){var n,e=(0,i.Z)(_);try{for(e.s();!(n=e.n()).done;){var t=n.value;console.log("Mine corrente:",t),I?U(t):L&&X(t)}}catch(o){e.e(o)}finally{e.f()}}else console.log("Errore: allMines non \xe8 un array o \xe8 indefinito.",_)},loader:A,size:"fit",color:"blue",children:"Claim from All Miners"}),(0,S.jsx)(g.Z,{onClick:function(){I?U(t):L&&X(t)},loader:A,size:"fit",color:"blue",children:"Claim now"}),(0,S.jsx)(g.Z,{onClick:function(){return Z(D[null===t||void 0===t?void 0:t.asset_id])},loader:A,size:"fit",color:"blue",children:"Upgrade now"})]})]})}}}]);
//# sourceMappingURL=850.e345f449.chunk.js.map