"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[850],{5850:function(n,e,i){i.r(e),i.d(e,{default:function(){return k}});var t=i(9439),o=i(2791),s=i(9434),a=i(2175),c=i(9085),r="styles_container__HW8Lb",l="styles_container_miningInfo__ISrps",u="styles_container_miningInfo_timeInfo__51cuT",d="styles_container_miningInfo_mainInfo__hf1vM",h="styles_container_buttonWrapper__ooiE-",v=i(7912),m=i(2181),f=i(9677),p=i(939),_=i(7086),g=i(175),x=i(3267),w=i(3102),y=i(1837),S=i(3329),b=o.lazy((function(){return i.e(356).then(i.bind(i,6356))})),j={"Chaos X-18 Mine Aurum":_,"ChaosX-18 Mine Celium":g,"ChaosX-18 Building Slot":x,"ChaosX-18 Level Up token":w,"Teleport to ChaosX-18":y},k=function(n){var e,i=n.mine,_=(0,o.useRef)(null),g=(0,s.I0)(),x=(0,o.useState)(null),w=(0,t.Z)(x,2),y=w[0],k=w[1],A=(0,s.v9)((function(n){return n.user})),M=A.waxConnected,C=A.anchorConnected,N=(0,s.v9)((function(n){return n.nfts})),L=N.myWorkingNfts,I=N.myNfts,z=function(n){var e=I.filter((function(n){return"ChaosX-18 Level Up NFT"===n.name}));e[0]?C?function(n,e){var i,t,o,s,a;y||(k(n.asset_id),null===(i=v.n.anchorSession)||void 0===i||i.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(t=v.n.anchorSession)||void 0===t||null===(o=t.auth)||void 0===o?void 0:o.actor.toString(),permission:"active"}],data:{from:null===(s=v.n.anchorSession)||void 0===s||null===(a=s.auth)||void 0===a?void 0:a.actor.toString(),to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){c.Am.success("Mine upgrading started, you can mine it when it will be finished"),k(null)})).catch((function(n){c.Am.error("Mine doesn't upgraded, try again after one minute"),k(null)})))}(n,e[0]):M&&function(n,e){var i,t;y||(k(n.asset_id),v.n.wax.api.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(i=v.n.wax)||void 0===i?void 0:i.userAccount,permission:"active"}],data:{from:null===(t=v.n.wax)||void 0===t?void 0:t.userAccount,to:"xcryptochaos",asset_ids:[e.asset_id],memo:"burn@level@"+n.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){c.Am.success("Mine upgrading started, you can mine it when it will be finished"),k(null)})).catch((function(n){c.Am.error("Mine doesn't upgraded, try again after one minute"),k(null)})))}(n,e[0]):c.Am.error("To upgrade your miner you need to purchase ChaosX-18 Level Up NFT")};return(0,o.useEffect)((function(){i&&setTimeout((function(){g((0,m.gr)(i.asset_id))}),1e3),g((0,m.tV)())}),[g,i]),(0,S.jsxs)(a.E.div,{viewport:{root:_,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:r,children:[L&&(0,S.jsxs)(o.Suspense,{fallback:(0,S.jsx)(p.Z,{size:250}),children:[console.log("mineLevel passed to Nft:",i.level)," ",(0,S.jsx)(b,{nft:L[null===i||void 0===i?void 0:i.asset_id],image:j[null===(e=L[null===i||void 0===i?void 0:i.asset_id])||void 0===e?void 0:e.name],functional:!1,mineLevel:i.level},null===i||void 0===i?void 0:i.asset_id)]},i.asset_id),i&&(0,S.jsxs)("div",{className:l,children:[(0,S.jsxs)("div",{className:u,children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Last claim : "}),"1/1/1970, 12:00:00 AM"===new Date(i.lastMined).toLocaleString()?"None":new Date(i.lastMined).toLocaleString()]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Last upgrade date : "}),"1/1/1970, 12:00:00 AM"===new Date(i.lastUpgrade).toLocaleString()?"None":new Date(i.lastUpgrade).toLocaleString()]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Unstake date : "}),"1/1/1970, 12:00:00 AM"===new Date(i.unstake_time).toLocaleString()?"None":new Date(i.unstake_time).toLocaleString()]})]}),(0,S.jsxs)("div",{className:d,children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Miner level : "}),i.level]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Miner locked : "}),0===i.is_locked?"No":"Yes"]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Miner staked : "}),0===i.is_staked?"No":"Yes"]})]})]}),(0,S.jsxs)("div",{className:h,children:[(0,S.jsx)(f.Z,{onClick:function(){C?function(){var n,e,t,o,s;y||(k("Mine"),null===(n=v.n.anchorSession)||void 0===n||n.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=v.n.anchorSession)||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.actor.toString(),permission:"active"}],data:{player:null===(o=v.n.anchorSession)||void 0===o||null===(s=o.auth)||void 0===s?void 0:s.actor.toString(),mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){c.Am.success("Resources collecting has successfully started"),k(null)})).catch((function(n){c.Am.error("You can't mine now, upgrade in progress"),k(null)})))}():M&&function(){var n,e;y||(k("Mine"),v.n.wax.api.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(n=v.n.wax)||void 0===n?void 0:n.userAccount,permission:"active"}],data:{player:null===(e=v.n.wax)||void 0===e?void 0:e.userAccount,mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(n){c.Am.success("Resources collecting has successfully started"),k(null)})).catch((function(n){c.Am.error("You can't mine now, upgrade in progress"),k(null)})))}()},loader:y,size:"fit",color:"blue",children:"Claim now"}),(0,S.jsx)(f.Z,{onClick:function(){return z(L[null===i||void 0===i?void 0:i.asset_id])},loader:y,size:"fit",color:"blue",children:"Upgrade miner now"})]})]})}}}]);
//# sourceMappingURL=850.15e355e2.chunk.js.map