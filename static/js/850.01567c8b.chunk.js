"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[850],{5850:function(e,n,i){i.r(n),i.d(n,{default:function(){return k}});var o=i(7762),t=i(9439),a=i(2791),s=i(9434),r=i(2175),l=i(9085),c="styles_container__HW8Lb",d="styles_container_miningInfo__ISrps",u="styles_container_miningInfo_aurumBoosters__EY-dL",g="styles_container_miningInfo_timeInfo__51cuT",m="styles_container_miningInfo_mainInfo__hf1vM",h="styles_container_buttonWrapper__ooiE-",p=i(7912),v=i(2181),f=i(9677),_=i(939),x=i(7086),w=i(175),y=i(3267),b=i(3102),S=i(1837),U=i(3329),j=a.lazy((function(){return i.e(356).then(i.bind(i,6356))})),T={"Chaos X-18 Mine Aurum":x,"ChaosX-18 Mine Celium":w,"ChaosX-18 Building Slot":y,"ChaosX-18 Level Up token":b,"Teleport to ChaosX-18":S},k=function(e){var n,i=e.mine,x=e.allMines,w=(0,a.useRef)(null),y=(0,s.I0)(),b=(0,a.useState)(null),S=(0,t.Z)(b,2),k=S[0],L=S[1],M=(0,s.v9)((function(e){return e.user})),A=M.waxConnected,C=M.anchorConnected,D=(0,s.v9)((function(e){return e.nfts})),I=D.myWorkingNfts,N=D.myNfts,z=function(){var e,n,o,t,a;k||(L("Mine"),null===(e=p.n.anchorSession)||void 0===e||e.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(n=p.n.anchorSession)||void 0===n||null===(o=n.auth)||void 0===o?void 0:o.actor.toString(),permission:"active"}],data:{player:null===(t=p.n.anchorSession)||void 0===t||null===(a=t.auth)||void 0===a?void 0:a.actor.toString(),mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){l.Am.success("Resources collecting has successfully started"),L(null)})).catch((function(e){l.Am.error("You can't claim now, upgrade in progress"),L(null)})))},X=function(){var e,n;k||(L("Mine"),p.n.wax.api.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=p.n.wax)||void 0===e?void 0:e.userAccount,permission:"active"}],data:{player:null===(n=p.n.wax)||void 0===n?void 0:n.userAccount,mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){l.Am.success("Resources collecting has successfully started"),L(null)})).catch((function(e){l.Am.error("You can't claim now, upgrade in progress"),L(null)})))},B=function(){C?z():A&&X()}.mineNft,Y=function(e){var n=N.filter((function(e){return"ChaosX-18 Level Up token"===e.name}));n[0]?C?function(e,n){var i,o,t,a,s;k||(L(e.asset_id),null===(i=p.n.anchorSession)||void 0===i||i.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(o=p.n.anchorSession)||void 0===o||null===(t=o.auth)||void 0===t?void 0:t.actor.toString(),permission:"active"}],data:{from:null===(a=p.n.anchorSession)||void 0===a||null===(s=a.auth)||void 0===s?void 0:s.actor.toString(),to:"xcryptochaos",asset_ids:[n.asset_id],memo:"burn@level@"+e.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){l.Am.success("Mine upgrading started, you can mine it when it will be finished"),L(null)})).catch((function(e){l.Am.error("Mine doesn't upgraded, try again after one minute"),L(null)})))}(e,n[0]):A&&function(e,n){var i,o;k||(L(e.asset_id),p.n.wax.api.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(i=p.n.wax)||void 0===i?void 0:i.userAccount,permission:"active"}],data:{from:null===(o=p.n.wax)||void 0===o?void 0:o.userAccount,to:"xcryptochaos",asset_ids:[n.asset_id],memo:"burn@level@"+e.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){l.Am.success("Mine upgrading started, you can mine it when it will be finished"),L(null)})).catch((function(e){l.Am.error("Mine doesn't upgraded, try again after one minute"),L(null)})))}(e,n[0]):l.Am.error("To upgrade your mine purchase ChaosX-18 Level Up token")};return(0,a.useEffect)((function(){i&&setTimeout((function(){y((0,v.gr)(i.asset_id))}),1e3),y((0,v.tV)())}),[y,i]),(0,U.jsxs)(r.E.div,{viewport:{root:w,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:c,children:[I&&(0,U.jsx)(a.Suspense,{fallback:(0,U.jsx)(_.Z,{size:250}),children:(0,U.jsx)(j,{nft:I[null===i||void 0===i?void 0:i.asset_id],image:T[null===(n=I[null===i||void 0===i?void 0:i.asset_id])||void 0===n?void 0:n.name],functional:!1,mineLevel:i.level,mineLastUpgrade:i.lastUpgrade},null===i||void 0===i?void 0:i.asset_id)},i.asset_id),i&&(0,U.jsxs)("div",{className:d,children:[(0,U.jsxs)("div",{className:u,children:[(0,U.jsxs)("p",{children:[(0,U.jsx)("b",{children:"First booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrOne).toLocaleString()?"Not yet available":new Date(i.bstrOne).toLocaleString()]}),(0,U.jsxs)("p",{children:[(0,U.jsx)("b",{children:"Second booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrTwo).toLocaleString()?"Not yet available":new Date(i.bstrTwo).toLocaleString()]})]}),(0,U.jsxs)("div",{className:g,children:[(0,U.jsxs)("p",{children:[(0,U.jsx)("b",{children:"Last time claimed: "}),"1.1.1970, 00:00:00"===new Date(i.lastMined).toLocaleString()?"None":new Date(i.lastMined).toLocaleString()]}),(0,U.jsxs)("p",{children:[(0,U.jsx)("b",{children:"Upgrade in progress: "}),console.log("Data di lastUpgrade:",i.lastUpgrade),"1.1.1970, 00:00:00"===new Date(i.lastUpgrade).toLocaleString()?"No":function(){var e=i.level-1,n=Math.floor(11*Math.pow(1.55,e)*1e3+72e5);console.log("totalMilliseconds:",n);var o=new Date(i.lastUpgrade);console.log("Upgrade in progress converted in TS, lastUpgradeDate:",o.getTime()),o.setTime(o.getTime()+n),console.log("Upgrade + difference before condition, lastUpgradeDate:",o.getTime());var t=new Date;if(o.getTime()<=t.getTime())return console.log("Upgrade in progress finished, lastUpgradeDate:",o.getTime()),console.log("Upgrade in progress finished, currentTime:",t.getTime()),"No";console.log("Upgrade in progress Yes, lastUpgradeDate:",o.getTime()),console.log("Upgrade in progress Yes, currentTime:",t.getTime()),console.log("Upgrade in progress Yes, lastUpgradeDate:",o.toLocaleString(),o.getTime());var a=new Date(o.getTime()-72e5);return console.log("Upgrade in progress :",a.toLocaleString(),a),a.toLocaleString()}()]})]}),(0,U.jsx)("div",{className:m,children:(0,U.jsxs)("p",{children:[(0,U.jsx)("b",{children:"Miner level: "}),i.level]})})]}),(0,U.jsxs)("div",{className:h,children:[(0,U.jsx)(f.Z,{onClick:function(){if(!k&&Array.isArray(x)){var e,n=(0,o.Z)(x);try{for(n.s();!(e=n.n()).done;){var i=e.value;C?z(i):A&&X(i)}}catch(t){n.e(t)}finally{n.f()}}else console.log("Errore: allMines non \xe8 un array o \xe8 indefinito.",x)},loader:k,size:"fit",color:"blue",children:"Claim from All Miners"}),(0,U.jsx)(f.Z,{onClick:B,loader:k,size:"fit",color:"blue",children:"Claim now"}),(0,U.jsx)(f.Z,{onClick:function(){return Y(I[null===i||void 0===i?void 0:i.asset_id])},loader:k,size:"fit",color:"blue",children:"Upgrade now"})]})]})}}}]);
//# sourceMappingURL=850.01567c8b.chunk.js.map