"use strict";(self.webpackChunkchaosx_18=self.webpackChunkchaosx_18||[]).push([[804],{804:function(e,n,i){i.r(n),i.d(n,{default:function(){return j}});var o=i(9439),t=i(2791),s=i(9434),a=i(2175),r=i(9085),l="styles_container__HW8Lb",c="styles_container_miningInfo__ISrps",d="styles_container_miningInfo_aurumBoosters__EY-dL",u="styles_container_miningInfo_timeInfo__51cuT",g="styles_container_miningInfo_mainInfo__hf1vM",p="styles_container_buttonWrapper__ooiE-",h=i(7912),m=i(2181),v=i(9677),f=i(939),_=i(7086),w=i(175),x=i(3267),b=i(3102),y=i(1837),S=i(3329),U=t.lazy((function(){return i.e(356).then(i.bind(i,6356))})),T={"Chaos X-18 Mine Aurum":_,"ChaosX-18 Mine Celium":w,"ChaosX-18 Building Slot":x,"ChaosX-18 Level Up token":b,"Teleport to ChaosX-18":y},j=function(e){var n,i=e.mine,_=(0,t.useRef)(null),w=(0,s.I0)(),x=(0,t.useState)(null),b=(0,o.Z)(x,2),y=b[0],j=b[1],L=(0,s.v9)((function(e){return e.user})),k=L.waxConnected,D=L.anchorConnected,C=(0,s.v9)((function(e){return e.nfts})),M=C.myWorkingNfts,A=C.myNfts,I=function(e){var n=A.filter((function(e){return"ChaosX-18 Level Up token"===e.name}));n[0]?D?function(e,n){var i,o,t,s,a;y||(j(e.asset_id),null===(i=h.n.anchorSession)||void 0===i||i.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(o=h.n.anchorSession)||void 0===o||null===(t=o.auth)||void 0===t?void 0:t.actor.toString(),permission:"active"}],data:{from:null===(s=h.n.anchorSession)||void 0===s||null===(a=s.auth)||void 0===a?void 0:a.actor.toString(),to:"xcryptochaos",asset_ids:[n.asset_id],memo:"burn@level@"+e.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Mine upgrading started, you can mine it when it will be finished"),j(null)})).catch((function(e){r.Am.error("Mine doesn't upgraded, try again after one minute"),j(null)})))}(e,n[0]):k&&function(e,n){var i,o;y||(j(e.asset_id),h.n.wax.api.transact({actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:null===(i=h.n.wax)||void 0===i?void 0:i.userAccount,permission:"active"}],data:{from:null===(o=h.n.wax)||void 0===o?void 0:o.userAccount,to:"xcryptochaos",asset_ids:[n.asset_id],memo:"burn@level@"+e.asset_id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Mine upgrading started, you can mine it when it will be finished"),j(null)})).catch((function(e){r.Am.error("Mine doesn't upgraded, try again after one minute"),j(null)})))}(e,n[0]):r.Am.error("To upgrade your mine purchase ChaosX-18 Level Up token")};return(0,t.useEffect)((function(){i&&setTimeout((function(){w((0,m.gr)(i.asset_id))}),1e3),w((0,m.tV)())}),[w,i]),(0,S.jsxs)(a.E.div,{viewport:{root:_,once:!0},transition:{type:"spring",ease:"easeInOut",damping:35,delay:.5},variants:{initial:{opacity:0},whileInView:{opacity:1}},initial:"initial",whileInView:"whileInView",className:l,children:[M&&(0,S.jsx)(t.Suspense,{fallback:(0,S.jsx)(f.Z,{size:250}),children:(0,S.jsx)(U,{nft:M[null===i||void 0===i?void 0:i.asset_id],image:T[null===(n=M[null===i||void 0===i?void 0:i.asset_id])||void 0===n?void 0:n.name],functional:!1,mineLevel:i.level,mineLastUpgrade:i.lastUpgrade},null===i||void 0===i?void 0:i.asset_id)},i.asset_id),i&&(0,S.jsxs)("div",{className:c,children:[(0,S.jsxs)("div",{className:d,children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"First booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrOne).toLocaleString()?"Not yet available":new Date(i.bstrOne).toLocaleString()]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Second booster: "}),"1.1.1970, 00:00:00"===new Date(i.bstrTwo).toLocaleString()?"Not yet available":new Date(i.bstrTwo).toLocaleString()]})]}),(0,S.jsxs)("div",{className:u,children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Last time claimed: "}),"1.1.1970, 00:00:00"===new Date(i.lastMined).toLocaleString()?"None":new Date(i.lastMined).toLocaleString()]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Upgrade in progress: "}),console.log("Data di lastUpgrade:",i.lastUpgrade),"1.1.1970, 00:00:00"===new Date(i.lastUpgrade).toLocaleString()?"No":function(){var e=i.level-1,n=Math.floor(11*Math.pow(1.55,e)*1e3+72e5);console.log("totalMilliseconds:",n);var o=new Date(i.lastUpgrade);console.log("Upgrade in progress converted in TS, lastUpgradeDate:",o.getTime()),o.setTime(o.getTime()+n),console.log("Upgrade + difference before condition, lastUpgradeDate:",o.getTime());var t=new Date;return o.getTime()<=t.getTime()?(console.log("Upgrade in progress finished, lastUpgradeDate:",o.getTime()),console.log("Upgrade in progress finished, currentTime:",t.getTime()),"No"):(console.log("Upgrade in progress Yes, lastUpgradeDate:",o.getTime()),console.log("Upgrade in progress Yes, currentTime:",t.getTime()),console.log("Upgrade in progress Yes, lastUpgradeDate:",o.toLocaleString(),o.getTime()),o.getTime(),function(e){throw new TypeError('"'+e+'" is read-only')}("lastUpgradeDate"),console.log("Upgrade in progress :",o.toLocaleString(),o.getTime()),o.toLocaleString())}()]})]}),(0,S.jsx)("div",{className:g,children:(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Miner level: "}),i.level]})})]}),(0,S.jsxs)("div",{className:p,children:[(0,S.jsx)(v.Z,{onClick:function(){D?function(){var e,n,o,t,s;y||(j("Mine"),null===(e=h.n.anchorSession)||void 0===e||e.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(n=h.n.anchorSession)||void 0===n||null===(o=n.auth)||void 0===o?void 0:o.actor.toString(),permission:"active"}],data:{player:null===(t=h.n.anchorSession)||void 0===t||null===(s=t.auth)||void 0===s?void 0:s.actor.toString(),mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Resources collecting has successfully started"),j(null)})).catch((function(e){r.Am.error("You can't claim now, upgrade in progress"),j(null)})))}():k&&function(){var e,n;y||(j("Mine"),h.n.wax.api.transact({actions:[{account:"xcryptochaos",name:"minetoken",authorization:[{actor:null===(e=h.n.wax)||void 0===e?void 0:e.userAccount,permission:"active"}],data:{player:null===(n=h.n.wax)||void 0===n?void 0:n.userAccount,mineId:null===i||void 0===i?void 0:i.id}}]},{blocksBehind:3,expireSeconds:30}).then((function(e){r.Am.success("Resources collecting has successfully started"),j(null)})).catch((function(e){r.Am.error("You can't claim now, upgrade in progress"),j(null)})))}()},loader:y,size:"fit",color:"blue",children:"Claim now"}),(0,S.jsx)(v.Z,{onClick:function(){return I(M[null===i||void 0===i?void 0:i.asset_id])},loader:y,size:"fit",color:"blue",children:"Upgrade now"})]})]})}}}]);
//# sourceMappingURL=804.795b2482.chunk.js.map